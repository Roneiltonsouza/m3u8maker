<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vizu.html - Editor Interativo</title>
    <style>
        :root {
            --primary: #6200ee;
            --bg: #f5f5f7;
            --dark: #1e1e1e;
            --whatsapp: #25d366;
            --download: #ff9800; /* Cor laranja para o bot√£o de baixar */
        }

        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); display: flex; flex-direction: column; height: 100vh; overflow: hidden; }

        /* Header e Abas */
        header { background: var(--dark); color: white; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; }
        .tabs { display: flex; gap: 5px; background: #333; padding: 5px 10px 0; }
        .tab { padding: 10px 20px; border: none; background: #444; color: #ccc; cursor: pointer; border-radius: 5px 5px 0 0; }
        .tab.active { background: var(--bg); color: var(--dark); font-weight: bold; }
        
        /* Estilo da aba de compartilhar */
        .tab.share-tab { 
            background: var(--primary); 
            color: white; 
            margin-left: 10px;
            border-radius: 5px 5px 0 0;
            font-weight: bold;
        }
        .tab.share-tab:hover { background: #4a00b5; }

        /* √Årea de Edi√ß√£o */
        .main-container { display: flex; flex: 1; height: calc(100vh - 110px); }
        .editor-side { width: 50%; display: flex; flex-direction: column; border-right: 2px solid #ddd; }
        
        textarea { 
            flex: 1; border: none; padding: 15px; font-family: 'Consolas', monospace; 
            font-size: 14px; outline: none; resize: none; background: #fafafa;
        }

        /* Preview Side */
        .preview-side { width: 50%; background: white; position: relative; }
        iframe { width: 100%; height: 100%; border: none; background: white; }

        /* Controles */
        .toolbar { padding: 10px; background: #eee; display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
        button { padding: 8px 15px; cursor: pointer; border: none; border-radius: 4px; transition: 0.3s; font-weight: 500; }
        
        .btn-run { background: #00c853; color: white; }
        .btn-copy { background: #2196f3; color: white; }
        .btn-download { background: var(--download); color: white; }
        .btn-paste { background: #757575; color: white; }

        button:hover { opacity: 0.9; transform: translateY(-1px); }
        
        #url-display { font-size: 12px; color: #666; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 250px; }

        /* Bot√£o WhatsApp Flutuante */
        .whatsapp-float {
            position: fixed; bottom: 20px; right: 20px;
            background: var(--whatsapp); color: white; width: 60px; height: 60px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3); cursor: pointer; text-decoration: none;
            z-index: 999; transition: transform 0.2s;
        }
        .whatsapp-float:hover { transform: scale(1.1); }

        #status-bar { background: #333; color: #00ff00; font-size: 12px; padding: 5px 20px; }
    </style>
</head>
<body>

<header>
    <h1>Vizu<span style="color:var(--primary)">.HTML</span></h1>
    <div id="url-display">P√°gina: vizu.html</div>
</header>

<div class="tabs">
    <button class="tab active">index.html</button>
    <button class="tab share-tab" onclick="shareSite()">üì§ Compartilhar Editor</button>
</div>

<div class="toolbar">
    <button class="btn-run" onclick="generateProject()">‚ñ∂ Gerar Projeto</button>
    <button class="btn-copy" onclick="copyCode()">üìã Copiar C√≥digo</button>
    <button class="btn-download" onclick="downloadCode()">üíæ Baixar HTML</button>
    <button class="btn-paste" onclick="pasteCode()">üì• Colar</button>
</div>

<div class="main-container">
    <div class="editor-side">
        <textarea id="html-code" placeholder="Digite seu c√≥digo HTML/CSS/JS aqui..." oninput="autoCheck()"></textarea>
    </div>
    <div class="preview-side">
        <iframe id="preview-window"></iframe>
    </div>
</div>

<div id="status-bar">Gerenciador: Sistema pronto para criar.</div>

<a href="#" class="whatsapp-float" onclick="shareSite()" title="Compartilhar link do Vizu.html">
    <span style="font-size: 28px;">üîó</span>
</a>

<script>
    const codeArea = document.getElementById('html-code');
    const previewWin = document.getElementById('preview-window');
    const statusBar = document.getElementById('status-bar');

    // 1. Gera o preview do c√≥digo digitado
    function generateProject() {
        try {
            const code = codeArea.value;
            const blob = new Blob([code], { type: 'text/html' });
            const virtualURL = URL.createObjectURL(blob);
            previewWin.src = virtualURL;
            
            statusBar.innerText = "Gerenciador: Projeto renderizado com sucesso!";
            statusBar.style.color = "#00ff00";
        } catch (err) {
            statusBar.innerText = "Gerenciador: Erro ao gerar preview.";
            statusBar.style.color = "#ff4444";
        }
    }

    // 2. Fun√ß√£o para Baixar o Arquivo HTML
    function downloadCode() {
        const code = codeArea.value;
        if (!code) {
            alert("O editor est√° vazio! Digite algo antes de baixar.");
            return;
        }

        const blob = new Blob([code], { type: 'text/html' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        
        a.href = url;
        a.download = 'projeto_vizu.html'; // Nome do arquivo ao baixar
        document.body.appendChild(a);
        a.click();
        
        // Limpeza do link tempor√°rio
        setTimeout(() => {
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }, 0);

        statusBar.innerText = "Gerenciador: Download conclu√≠do!";
        statusBar.style.color = "#00ff00";
    }

    // 3. Compartilha a URL do SITE Vizu.html
    function shareSite() {
        const siteURL = window.location.href;
        const message = encodeURIComponent(`Ei! Conhe√ßa o Vizu.HTML, um editor de c√≥digo interativo incr√≠vel: ${siteURL}`);
        window.open(`https://wa.me/?text=${message}`, '_blank');
        
        statusBar.innerText = "Gerenciador: Link do site enviado para o WhatsApp!";
        statusBar.style.color = "#2196f3";
    }

    // Fun√ß√µes auxiliares
    function autoCheck() {
        const code = codeArea.value;
        if(code.includes("<script>") && !code.includes("<\/script>")) {
            statusBar.innerText = "Dica: Lembre-se de fechar a tag <script>.";
            statusBar.style.color = "#ffbb33";
        }
    }

    function copyCode() {
        codeArea.select();
        document.execCommand('copy');
        statusBar.innerText = "Gerenciador: C√≥digo copiado para a √°rea de transfer√™ncia!";
        statusBar.style.color = "#2196f3";
    }

    async function pasteCode() {
        try {
            const text = await navigator.clipboard.readText();
            codeArea.value = text;
            statusBar.innerText = "Gerenciador: C√≥digo colado com sucesso!";
            statusBar.style.color = "#00ff00";
        } catch(e) {
            alert("Erro ao colar. Permita o acesso √† √°rea de transfer√™ncia no seu navegador.");
        }
    }
</script>

</body>
</html>
