<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <title>AQV - Editor de Projetos</title>
    <style>
        body { font-family: sans-serif; background-color: #1e1e1e; color: white; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        header { background: #333; padding: 10px; display: flex; justify-content: space-between; align-items: center; }
        
        /* Container Principal */
        .container { display: flex; flex: 1; height: 80vh; }
        
        /* Editor e Abas */
        .editor-side { width: 50%; border-right: 2px solid #444; display: flex; flex-direction: column; }
        .tabs { display: flex; background: #2d2d2d; }
        .tab { padding: 10px 20px; cursor: pointer; background: #3c3c3c; border: none; color: white; }
        textarea { flex: 1; background: #1a1a1a; color: #00ff00; border: none; padding: 15px; font-family: monospace; resize: none; outline: none; }

        /* Preview (Visualização) */
        .preview-side { width: 50%; background: white; position: relative; }
        iframe { width: 100%; height: 100%; border: none; }
        
        /* Botões */
        .btn-run { background: #28a745; color: white; border: none; padding: 10px 20px; cursor: pointer; font-weight: bold; }
        .btn-download { background: #007bff; color: white; border: none; padding: 10px 20px; cursor: pointer; margin-right: 10px; }
        
        /* Botão Flutuante de Compartilhamento */
        .share-float { 
            position: fixed; bottom: 20px; right: 20px; 
            background: #f39c12; color: white; 
            width: 60px; height: 60px; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; 
            text-decoration: none; box-shadow: 2px 2px 10px rgba(0,0,0,0.5); 
            z-index: 100; font-size: 30px; border: none; cursor: pointer;
        }

        /* Tela Cheia */
        .fullscreen-btn { position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.5); color: white; border: none; cursor: pointer; padding: 5px; }
    </style>
</head>
<body>

<header>
    <h1>AQV Editor</h1>
    <div>
        <button class="btn-download" onclick="downloadProjeto()">Baixar Arquivo</button>
        <button class="btn-run" onclick="updatePreview()">Gerar Projeto ▶</button>
    </div>
</header>

<div class="container">
    <div class="editor-side">
        <div class="tabs">
            <button class="tab">index.html</button>
            <button class="tab" onclick="copiarCodigo()">Copiar Código</button>
        </div>
        <textarea id="codigo-html" placeholder="Digite seu código aqui..."><meta charset="utf-8">
<title>Minha Primeira Página HTML</title>
<a href="https://www.google.com">Clique aqui para ir ao Google</a></textarea>
    </div>

    <div class="preview-side" id="preview-container">
        <button class="fullscreen-btn" onclick="toggleFullScreen()">[ ] Tela Cheia</button>
        <iframe id="resultado"></iframe>
    </div>
</div>

<button class="share-float" onclick="compartilharURL()" title="Compartilhar link do site">
    ➦
</button>

<script>
    // Função para rodar o código no Iframe (Visualizar)
    function updatePreview() {
        const code = document.getElementById('codigo-html').value;
        const frame = document.getElementById('resultado').contentWindow.document;
        frame.open();
        frame.write(code);
        frame.close();
    }

    // Função Copiar Código do Editor
    function copiarCodigo() {
        const text = document.getElementById('codigo-html');
        text.select();
        document.execCommand('copy');
        alert("Código copiado com sucesso!");
    }

    // Função para Compartilhar a URL do site
    function compartilharURL() {
        if (navigator.share) {
            navigator.share({
                title: 'AQV Editor',
                text: 'Confira este editor de códigos!',
                url: window.location.href
            }).catch(console.error);
        } else {
            // Fallback: Copia o link se o navegador não tiver suporte ao Share API
            const dummy = document.createElement('input');
            document.body.appendChild(dummy);
            dummy.value = window.location.href;
            dummy.select();
            document.execCommand('copy');
            document.body.removeChild(dummy);
            alert("Link do site copiado para a área de transferência!");
        }
    }

    // Função Baixar Projeto
    function downloadProjeto() {
        const code = document.getElementById('codigo-html').value;
        const blob = new Blob([code], { type: 'text/html' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'projeto_aqv.html';
        a.click();
    }

    // Função Tela Cheia para o Preview
    function toggleFullScreen() {
        const elem = document.getElementById('preview-container');
        if (!document.fullscreenElement) {
            elem.requestFullscreen();
        } else {
            document.exitFullscreen();
        }
    }

    window.onerror = function() {
        alert("Opa! Detectamos um erro no seu código. Verifique as tags abertas.");
        return true;
    };
</script>

</body>
</html>
